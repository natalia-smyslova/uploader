(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=t(o);fetch(o.href,i)}})();const f=":host{font-family:Inter,sans-serif;display:block;padding:16.5px 20px;border:1px solid rgba(204,204,206,.4);border-radius:16px;width:300px;box-shadow:2px 2px 10px #0000001a;max-height:512px;background:#fff6;margin:20px auto}.uploader__container{background:linear-gradient(to bottom,#5f5cf0,#dddcfc 43%,#fff);display:flex;flex-direction:column;align-items:center;padding:11px 12px 11px 13px;border-radius:22px}.close-button{position:relative;width:34px;height:34px;background-color:#ccccce47;border-radius:50%;display:flex;justify-content:center;align-items:center;align-self:self-end}h1{color:#f1f1f1;font-size:20px;font-weight:600;margin:0 0 7px;font-family:Inter}h2{color:#f1f1f1;font-size:14px;font-weight:300;margin:0 0 10px}.input-container{position:relative;width:100%;display:flex}.name-input{position:relative;background:#f1f1f1;border:1px solid #A5A5A5;border-radius:10px;display:block;flex:1;margin-bottom:10px;padding:6px 30px 6px 6px;font-size:17.5px;color:#a5a5a5;font-weight:500;outline:none;box-sizing:border-box,}input:valid{color:#5f5cf0}.input-wrapper{display:flex;flex-direction:column;align-items:flex-start}.input-upload{position:absolute;z-index:5;height:100px;width:200px;opacity:0}.close-icon{position:absolute;right:10px;top:10px;cursor:pointer;fill:#a5a5a5}.clear-icon{fill:#5f5cf0}.input-container input:valid+.close-icon{fill:#5f5cf0}.input-container input:valid{background:#f1f1f1;border-color:#a5a5a5}.input-container input.valid{color:#5f5cf0;background:#e0e0ff;border-color:#5f5cf0}.input-container input:focus+.close-icon{fill:#5f5cf0}.input-container input.valid+.close-icon{fill:#5f5cf0}label{font-weight:400;color:#5f5cf0;font-size:14px;text-align:center;display:block;position:relative;z-index:2;margin-top:150px}.upload-box{position:relative;padding:40px 28px;border-radius:30px;border:1px solid #A5A5A5;background:#fff6}.progress-container.show{display:flex;visibility:visible}.progress-container.show~.upload-box{transform:translateY(-50px)}.upload-wrapper{position:relative;width:100%;height:100%}.layer{position:absolute;top:0;left:25px;width:100%;height:100%;object-fit:contain}.folder{z-index:1;height:126px;width:169px}.file{z-index:2;height:72px;top:25px}.file-1{left:-30px}.file-2{z-index:3;height:82px;left:20px}.blur-overlay{position:absolute;top:40px;left:25px;width:169px;height:84px;background:#2c2c2c33;-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px);box-shadow:inset 0 4px 6px #2c2c2c33;z-index:4;border-radius:16px}button{background:#5f5cf0;color:#fff;font-size:20px;border-radius:30px;border-color:transparent;padding:16px 88px;margin-top:10px}button:disabled{background:#bbb9d2;color:#f1f1f1;cursor:not-allowed}.progress-container{width:100%;background-color:#f1f1f1;margin-top:15px;display:none;border-radius:10px;border:1px solid #A5A5A5;padding:3px 6px 4px 3px;justify-content:space-between;align-items:center;gap:14px}.progress-square{background-color:#5f5cf0;min-width:37px;height:28px;border-radius:10px}.progress-wrapper{width:100%;display:flex;flex-direction:column}.progress-info{display:flex;justify-content:space-between}.progress-bar{width:0;height:5px;background-color:#5f5cf0;transition:width .2s;border-radius:10px}.file-name,.file-progress{color:#5f5cf0;font-size:10px}.file-name{left:0;font-weight:500}.file-progress{right:0;text-align:right;font-weight:400}.response-text{text-align:left;font-size:14px;letter-spacing:0%;font-weight:300}.hidden{visibility:hidden;opacity:0}.upload-box{transition:transform .5s ease}@keyframes moveUp{0%{transform:translateY(50px)}to{transform:translateY(0)}}@keyframes increaseFontSize{0%{font-size:10px}to{font-size:14px}}.increase-font{animation:increaseFontSize .5s ease-in-out forwards}@keyframes collapseAnimation{0%{transform:scaleY(1);opacity:1}to{transform:scaleY(0);opacity:0}}@keyframes collapse{0%{transform:scaleY(1);opacity:1;transform-origin:center}to{transform:scaleY(0)}}@keyframes expand{0%{transform:scaleY(0);opacity:0;transform-origin:center}to{transform:scaleY(1);opacity:1}}:host(.collapsing){animation:collapseAnimation .5s forwards}:host(.expanding){animation:expand .5s forwards}@keyframes closeUploaderAnimation{0%{transform:scaleY(1)}to{transform:scaleY(0);visibility:hidden}}:host(.closing){animation:closeUploaderAnimation .7s ease-out forwards;transform-origin:top}",g=`
  <div class="uploader__container">
      <div class="close-button">
          <svg width="20" height="20" viewBox="0 0 16 17" fill="#FFFFFF" xmlns="http://www.w3.org/2000/svg">
              <path d="M1.07102 15.5711C0.408315 14.9084 0.408313 13.8339 1.07102 13.1712L12.8133 1.42898C13.476 0.766269 14.5504 0.76627 15.2132 1.42898C15.8759 2.09169 15.8759 3.16615 15.2132 3.82885L3.4709 15.5711C2.80819 16.2338 1.73373 16.2338 1.07102 15.5711ZM1.07102 3.82886C0.408314 3.16615 0.408314 2.09169 1.07102 1.42898C1.73373 0.76627 2.80819 0.76627 3.4709 1.42898L15.2132 13.1712C15.8759 13.8339 15.8759 14.9084 15.2132 15.5711C14.5504 16.2338 13.476 16.2338 12.8133 15.5711L1.07102 3.82886Z" fill="white"/>
          </svg>
      </div>
      <h1 id="headerTextMain">Загрузочное окно</h1>
      <h2 id="headerText">Перед загрузкой дайте имя файлу</h2>
      <div class="input-container">
          <input type="text" id="name" class="name-input" placeholder="Название файла" required autocomplete="off"/>
          <svg class="close-icon" width="17" height="17" viewBox="0 0 16 17" xmlns="http://www.w3.org/2000/svg">
              <path d="M1.07102 15.5711C0.408315 14.9084 0.408313 13.8339 1.07102 13.1712L12.8133 1.42898C13.476 0.766269 14.5504 0.76627 15.2132 1.42898C15.8759 2.09169 15.8759 3.16615 15.2132 3.82885L3.4709 15.5711C2.80819 16.2338 1.73373 16.2338 1.07102 15.5711ZM1.07102 3.82886C0.408314 3.16615 0.408314 2.09169 1.07102 1.42898C1.73373 0.76627 2.80819 0.76627 3.4709 1.42898L15.2132 13.1712C15.8759 13.8339 15.8759 14.9084 15.2132 15.5711C14.5504 16.2338 13.476 16.2338 12.8133 15.5711L1.07102 3.82886Z"/>
          </svg>
      </div>
      <div class="upload-box" id="uploadArea">
          <div class="upload-wrapper">
              <div class="input-wrapper">
                  <input class="input-upload" type="file" id="file" accept=".txt,.json,.csv">
                  <label for="file">Перенесите ваш файл в область ниже</label>
              </div>
<img src="/images/docs_img.png" alt="Папка" class="layer folder">
<img src="/images/file_img.png" alt="Файл 1" class="layer file file-1">
<img src="/images/file_img2.png" alt="Файл 2" class="layer file file-2">
              <div class="blur-overlay"></div>
          </div>
      </div>
      <div class="progress-container">
          <div class="progress-square"></div>
          <div class="progress-wrapper">
              <div class="progress-info">
                  <div class="file-name" id="fileNameDisplay"></div>
                  <div class="file-progress"></div>
              </div>
              <div class="progress-bar"></div>
          </div>
            <svg class="clear-icon" width="15" height="15" viewBox="0 0 16 17" xmlns="http://www.w3.org/2000/svg">
              <path d="M1.07102 15.5711C0.408315 14.9084 0.408313 13.8339 1.07102 13.1712L12.8133 1.42898C13.476 0.766269 14.5504 0.76627 15.2132 1.42898C15.8759 2.09169 15.8759 3.16615 15.2132 3.82885L3.4709 15.5711C2.80819 16.2338 1.73373 16.2338 1.07102 15.5711ZM1.07102 3.82886C0.408314 3.16615 0.408314 2.09169 1.07102 1.42898C1.73373 0.76627 2.80819 0.76627 3.4709 1.42898L15.2132 13.1712C15.8759 13.8339 15.8759 14.9084 15.2132 15.5711C14.5504 16.2338 13.476 16.2338 12.8133 15.5711L1.07102 3.82886Z"/>
          </svg>
      </div>                   
      <button id="uploadBtn" disabled>Загрузить</button>
  </div>
`;function x(e){const s=e.querySelector(".progress-container"),t=e.querySelector(".upload-box"),r=e.querySelector(".input-container");r.style.display="none",s.style.display="flex",t.style.transform="translateY(50px)",t.style.animation="moveUp 1s ease forwards"}function u(e,s){const t=e.querySelector(".progress-bar");requestAnimationFrame(()=>{t.style.width=`${s}%`})}function y(e){setTimeout(()=>{e.querySelector(".progress-bar").style.display="none"},500)}function p(){const e=this.fileInput.files[0],s=this.nameInput.value.trim();if(e&&!l(e)&&(this.fileInput.value=""),s?(this.fileInput.disabled=!1,this.uploadBtn.disabled=!(e&&l(e)),this.headerText.textContent="Перенесите ваш файл в область ниже"):(this.fileInput.disabled=!0,this.uploadBtn.disabled=!0,this.headerText.textContent="Перед загрузкой дайте имя файлу"),e&&l(e)){this.headerText.textContent="Загрузите ваш файл",x(this.shadowRoot);let t=0;const r=setInterval(()=>{t+=10,u(this.shadowRoot,t),this.shadowRoot.querySelector(".file-progress").textContent=`${t}%`,t>=100&&(clearInterval(r),y(this.shadowRoot),this.shadowRoot.querySelector(".file-progress").classList.add("increase-font"),this.shadowRoot.querySelector(".file-name").classList.add("increase-font"),this.fileInput.disabled=!0,this.uploadBtn.disabled=!1,this.uploadArea.classList.add("disabled"))},100);this.shadowRoot.querySelector(".file-name").textContent=this.nameInput.value.trim()}}function l(e){return["text/plain","application/json","text/csv"].includes(e.type)?e.size>1024?(alert("Ошибка: Файл превышает 1 KB"),!1):!0:(alert("Ошибка: Недопустимый формат файла"),!1)}async function m(e){const s=e.fileInput.files[0],t=e.nameInput.value.trim();if(!s||!t)return;e.shadowRoot.querySelector(".input-container").style.display="none",e.uploadBtn.disabled=!0;const r=new FormData;r.append("file",s),r.append("name",t);const o=new XMLHttpRequest;o.open("POST","https://file-upload-server-mc26.onrender.com/api/v1/upload",!0),o.upload.onprogress=i=>{if(i.lengthComputable){const a=i.loaded/i.total*100;u(e.shadowRoot,a),e.shadowRoot.querySelector(".file-progress").textContent=`${Math.round(a)}%`}},o.onload=()=>{if(o.status===200){const i=JSON.parse(o.responseText);c(e,"success",i)}else c(e,"error",{message:"Ошибка загрузки"});e.uploadBtn.disabled=!1},o.onerror=()=>{c(e,"error",{message:"Ошибка соединения с сервером"})},o.send(r)}function c(e,s,t={}){const r=e.shadowRoot.querySelector(".input-container"),o=e.shadowRoot.querySelector(".upload-box"),i=e.shadowRoot.querySelector(".progress-container"),a=e.shadowRoot.querySelector(".uploader__container"),d=e.shadowRoot.host;d.classList.add("collapsing"),setTimeout(()=>{e.shadowRoot.querySelector("#uploadBtn").style.display="none",s==="success"?a.style.background="linear-gradient(135deg, rgba(95, 92, 240, 1) 0%, rgba(143, 141, 244, 1) 100%)":a.style.background="linear-gradient(135deg, rgba(240, 92, 92, 1) 0%, rgba(143, 141, 244, 1) 100%)";const h=e.shadowRoot.querySelector("#headerText"),n=document.createElement("p");n.classList.add("response-text"),s==="success"?(n.innerHTML=`
              name: ${t.name} <br>
              filename: ${t.filename} <br>
              timestamp: ${t.timestamp} <br>
              message: ${t.message}
            `,e.headerTextMain.textContent="Файл загружен"):(n.innerHTML=`Error: ${t.message}`,e.headerTextMain.textContent="Ошибка в загрузке файла"),h.replaceWith(n),n.classList.add("expanding"),e.headerTextMain.classList.add("expanding"),r.style.display="none",o.style.display="none",i.style.display="none",e.toggleCloseButtonHandler("resetUI"),d.classList.remove("collapsing"),d.classList.add("expanding")},500)}class b extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"});const s=new CSSStyleSheet;s.replaceSync(f),this.shadowRoot.adoptedStyleSheets=[s],this.shadowRoot.innerHTML=g,this.nameInput=this.shadowRoot.querySelector("#name"),this.fileInput=this.shadowRoot.querySelector("#file"),this.uploadBtn=this.shadowRoot.querySelector("#uploadBtn"),this.message=this.shadowRoot.querySelector("#message"),this.uploadArea=this.shadowRoot.querySelector("#uploadArea"),this.closeIcon=this.shadowRoot.querySelector(".close-icon"),this.headerTextMain=this.shadowRoot.querySelector("#headerTextMain"),this.headerText=this.shadowRoot.querySelector("#headerText"),this.clearIcon=this.shadowRoot.querySelector(".clear-icon"),this.nameInput.addEventListener("input",p.bind(this)),this.fileInput.addEventListener("change",p.bind(this)),this.uploadBtn.addEventListener("click",m.bind(this,this)),this.clearIcon.addEventListener("click",this.resetUI.bind(this)),this.closeIcon.addEventListener("click",this.resetUI.bind(this)),this.toggleCloseButtonHandler("closeUploader"),this.shadowRoot.querySelector(".close-button").addEventListener("click",()=>{this.shadowRoot.querySelector(".uploader__container").classList.remove("open"),setTimeout(()=>{this.resetUI()},1e3)}),this.fileInput.disabled=!0,this.uploadArea.addEventListener("dragover",this.handleDragOver.bind(this)),this.uploadArea.addEventListener("drop",this.handleDrop.bind(this))}closeUploader(){this.classList.add("closing"),setTimeout(()=>{this.style.display="none",this.classList.remove("closing")},500)}toggleCloseButtonHandler(s){const t=this.shadowRoot.querySelector(".close-button");t.replaceWith(t.cloneNode(!0));const r=this.shadowRoot.querySelector(".close-button");s==="resetUI"?r.addEventListener("click",this.resetUI.bind(this)):r.addEventListener("click",this.closeUploader.bind(this))}handleDragOver(s){s.preventDefault(),s.stopPropagation(),this.uploadArea.classList.add("drag-over")}handleDrop(s){if(s.preventDefault(),s.stopPropagation(),this.fileInput.disabled)return;this.uploadArea.classList.remove("drag-over");const t=s.dataTransfer.files;if(t.length){const r=t[0];l(r)&&(this.fileInput.files=t,p.call(this))}}showMessage(s,t){console.error(s)}resetUI(){const s=this.shadowRoot.querySelector(".input-container"),t=this.shadowRoot.querySelector(".upload-box"),r=this.shadowRoot.querySelector(".progress-container"),o=this.shadowRoot.querySelector(".uploader__container");s.style.display="flex",t.style.display="block",r.style.display="none",this.shadowRoot.querySelector("#uploadBtn").style.display="inline-block",s.classList.remove("collapsing"),t.classList.remove("collapsing"),r.classList.remove("collapsing");const i=this.shadowRoot.querySelector(".response-text");i&&(i.style.display="none"),s.classList.remove("expanding"),t.classList.remove("expanding"),r.classList.remove("expanding"),this.uploadBtn.disabled=!0,this.fileInput.value="",this.fileInput.disabled=!0,this.uploadBtn.disabled=!0,this.headerTextMain.textContent="Загрузочное окно",this.headerText.textContent="Перед загрузкой дайте имя файлу",this.shadowRoot.querySelector(".uploader__container").style.background="",this.nameInput.value="",t.style.animation="none",t.style.transform="",this.headerText.style.display="block",o.classList.add("open"),this.toggleCloseButtonHandler("closeUploader")}}customElements.define("file-uploader",b);
